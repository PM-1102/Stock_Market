SENSEX Futures VWAP & PCR MonitorAn automated algorithmic trading tool designed to monitor SENSEX Futures tick data via the Dhan API. The system calculates real-time Session VWAP, builds 5-minute candles, and performs a Put-Call Ratio (PCR) analysis when price touches the VWAP to generate trading signals.üöÄ Key FeaturesReal-time WebSocket Feed: Efficiently processes binary tick data from Dhan's high-speed feed.Asynchronous Processing: Utilizes multi-threading for API calls (Option Chain/PCR) to ensure the WebSocket connection never drops during heavy calculations.Session VWAP Engine: Calculates Volume Weighted Average Price (VWAP) specifically for the Indian market hours (9:15 AM - 3:30 PM).Smart Volume Filtering: Prevents data distortion by ignoring "Quote-only" packets and only processing actual trade volume.Customizable Entry Timing: Allows the user to choose between entry on "Candle Close" or "N Seconds" before a candle closes.üõ† Project StructureFileDescriptionmain.pyThe central execution hub. Handles WebSocket connectivity, threading, and signal logic.dhan_client.pyWrapper for Dhan REST APIs to fetch Option Chains and Expiry lists.vwap_engine.pyCore mathematical logic for maintaining cumulative Volume and Price-Volume (PV).candle_builder.pyAggregates tick data into OHLC candles based on a defined time interval.config.pyStores sensitive API credentials and global constants like Security IDs.‚öôÔ∏è Logic WorkflowConnection: The script connects to the Dhan WebSocket and subscribes to the SENSEX Futures instrument.Tick Validation: Incoming packets are checked for a change in total_volume. If no new trade has occurred, the tick is ignored to maintain system speed.VWAP Check: The system monitors the distance between the Last Traded Price (LTP) and the Session VWAP.Signal Generation:If a "Touch" is detected (Price vs VWAP <= threshold), a background thread is launched.It fetches the current Option Chain and calculates the PCR.Signal Rules:PCR > 1.0: Suggests high Put writing/Bearish sentiment; system flags a BUY CALL.PCR < 1.0: Suggests high Call writing/Bullish sentiment; system flags a BUY PUT.üö¶ How to Use1. RequirementsPython 3.8+websocket-client, requests, and struct libraries.2. ConfigurationOpen config.py and input your Dhan credentials:PythonACCESS_TOKEN = "your_dhan_token_here"
CLIENT_ID = "your_client_id_here"
3. ExecutionRun the main script:Bashpython main.py
4. Interactive SetupUpon starting, the script will prompt you for your trading preferences:Entry Timing: Choose if signals should trigger strictly at the end of a candle or slightly before.SL/TP %: Define your risk parameters for monitoring.‚ö†Ô∏è Important ConsiderationsRate Limits: The system includes built-in rate-limiting for REST API calls to avoid being blocked by Dhan servers.Execution Risk: This tool is currently configured for Monitoring Only. Automated order placement requires additional integration with the Dhan.place_order API.Market Hours: The VWAP engine is hardcoded to reset at 09:15 AM IST.
